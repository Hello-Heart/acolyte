(function(e){"use strict";e._progress=function(t,n){if(e("#aco-lock").length>0)return false;e('<div aria-hidden="true" aria-labelledby="aco-load-message" role="dialog" class="modal fade" id="aco-lock"><div class="modal-dialog"><div class="modal-content alert alert-block alert-info"><div class="modal-body"><p class="lead">'+t+'</p><div class="progress progress-striped active"><div style="width: '+n+'%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="90" role="progressbar" class="progress-bar"><span class="sr-only">'+n+"%</span></div></div></div></div></div></div>").appendTo("body").modal({keyboard:false}).on("hidden.bs.modal",function(){e("#aco-lock").remove()})};e._lock=function(){e._progress("Loading...",90)};e._unlock=function(){e("#aco-lock").modal("hide")};e._displayUnexpectedError=function(t){e('<div id="aco-unexpected-error" class="modal fade" role="dialog" aria-labelledby="aco-unexpected-error" aria-hidden="false"><div class="modal-dialog"><div class="modal-content alert alert-block alert-danger"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button><h4 class="modal-title">Unexpected error</h4></div><div class="modal-body"><p class="lead">An error has occured, please try again later.<br />Check error details with button thereafter.</p><button data-target="#error-details" data-toggle="collapse" class="btn" type="button">Details</button><button class="btn btn-danger pull-right" data-dismiss="modal">Close</button></div><div id="error-details" class="modal-footer collapse"><h5>Error details</h5>'+t+"</div></div></div></div>").appendTo("body").modal().on("hidden.bs.modal",function(){e("#aco-unexpected-error").remove()})};var t=function(t,n,r){e._lock();t(n).done(function(t){if(!t||!t["exception"])return r.success(t);var i=typeof n=="object"&&n["url"]?n.url:n;return e._displayUnexpectedError("<p>Unavailable : <em>"+i+"</em></p><pre>"+t.exception+"</pre>")}).fail(function(t,i,s){var o=t["responseJSON"]&&t.responseJSON["exception"]?t.responseJSON.exception:s;if(r.skipError(o))return;var u=typeof n=="object"&&n["url"]?n.url:n;e._displayUnexpectedError("<p>Unavailable : <em>"+u+"</em></p><pre>"+i+" - "+o+"</pre>")}).always(e._unlock)},n=function(e){return false};e._ajax=function(r,i,s){return t(e.ajax,r,{success:i,skipError:s||n})};e._getJSON=function(t,n){return e._ajax({url:t,type:"GET",cache:false,dataType:"json"},n)}})(jQuery)
